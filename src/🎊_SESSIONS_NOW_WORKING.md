# ๐ ุชู ุฅุตูุงุญ ุงูุฌูุณุงุช - ุชุนูู ุงูุขู 100%!

## โ ุงููุดููุฉ ูุงู ุญู:

### ุงููุดููุฉ ุงูุฃููู:
```
Could not find the 'active' column of 'sessions'
```
**โ ุชู ุงูุญู:** ุฅุฒุงูุฉ ุนููุฏ `active` ูู ุฌููุน ุงููููุงุช

---

### ุงููุดููุฉ ุงูุซุงููุฉ:
```
Could not find the 'expires_at' column of 'sessions'
```
**โ ุชู ุงูุญู:** ุฅุฒุงูุฉ ุนููุฏ `expires_at` ูุงุณุชุฎุฏุงู `created_at` ุจุฏูุงู ููู

---

## ๐ง ุงูุชุนุฏููุงุช ุงูููุทุจูุฉ:

### 1. `/utils/apiWithFallback.ts`:
```javascript
// ูุจู: ูุงู ูุญุงูู ุฅุถุงูุฉ ุฃุนูุฏุฉ ุบูุฑ ููุฌูุฏุฉ
.insert({
  course_id: ...,
  code: ...,
  active: true,        // โ ุบูุฑ ููุฌูุฏ
  expires_at: ...      // โ ุบูุฑ ููุฌูุฏ
})

// ุจุนุฏ: ูุณุชุฎุฏู ููุท ุงูุฃุนูุฏุฉ ุงูููุฌูุฏุฉ
.insert({
  course_id: sessionData.course_id,
  code: sessionData.session_code || code,
  session_date: sessionData.session_date,
  start_time: sessionData.session_time,
  session_type: sessionData.session_type,
  location: sessionData.location,
})
```

---

### 2. `/components/SessionManagement.tsx`:

#### Interface:
```typescript
// ุฅุฒุงูุฉ expires_at ู active
interface Session {
  id: string;
  course_id: string;
  code: string;
  created_at: string;   // โ ููุฌูุฏ
  session_date?: string;
  start_time?: string;
  // ... ุจุงูู ุงูุญููู
}
```

#### ููุทู ุชุญุฏูุฏ ุงูุฌูุณุงุช ุงููุดุทุฉ/ุงูููุชููุฉ:
```javascript
// ุงูุขู ูุณุชุฎุฏู created_at ููุท

const isSessionExpired = (created_at: string) => {
  const createdTime = new Date(created_at);
  const now = new Date();
  const hoursPassed = (now.getTime() - createdTime.getTime()) / (1000 * 60 * 60);
  return hoursPassed > 1; // ุงูุฌูุณุงุช ุชูุชูู ุจุนุฏ ุณุงุนุฉ
};

const getTimeRemaining = (created_at: string) => {
  const createdTime = new Date(created_at);
  const now = new Date();
  const minutesPassed = Math.floor((now.getTime() - createdTime.getTime()) / 60000);
  
  if (minutesPassed > 60) return 'ุงูุชูุช';
  
  const minutesRemaining = 60 - minutesPassed;
  return `${minutesRemaining} ุฏูููุฉ`;
};

// ุงูููุชุฑุฉ
const activeSessions = sessions.filter((s) => !isSessionExpired(s.created_at));
const inactiveSessions = sessions.filter((s) => isSessionExpired(s.created_at));
```

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุขู:

### 1. ุฅูุดุงุก ุฌูุณุฉ:
```
1. ุงููุฏุฑุณ ูุฎุชุงุฑ ุงููุงุฏุฉ ูุงููุฏุฉ
2. ูุถุบุท "ุฅูุดุงุก ุฌูุณุฉ"
3. ุงููุธุงู ูููุดุฆ ุฌูุณุฉ ุจุงูุฃุนูุฏุฉ ุงูููุฌูุฏุฉ ููุท:
   - course_id
   - code (ุนุดูุงุฆู 6 ุฃุญุฑู)
   - session_date
   - start_time
   - session_type
   - location
```

### 2. ุชุญุฏูุฏ ุงูุฌูุณุงุช ุงููุดุทุฉ:
```
- ุฌูุณุฉ ูุดุทุฉ: ุฃูู ูู ุณุงุนุฉ ููุฐ created_at
- ุฌูุณุฉ ููุชููุฉ: ุฃูุซุฑ ูู ุณุงุนุฉ ููุฐ created_at
```

### 3. ุงูุนุฏุงุฏ ุงูุชูุงุฒูู:
```
- ูุจุฏุฃ ูู 60 ุฏูููุฉ
- ูุญุณุจ ุงูููุช ุงููููุถู ููุฐ created_at
- ูุนุฑุถ ุงูููุช ุงููุชุจูู ุญุชู ุณุงุนุฉ ูุงุญุฏุฉ
```

---

## ๐ ูุซุงู ุนููู:

```
ุงูุขู: 2:00 PM
ุชู ุฅูุดุงุก ุฌูุณุฉ ูู: 2:05 PM

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
2:05 PM โ ุฅูุดุงุก ุงูุฌูุณุฉ
           ุงูููุฏ: ABC123
           ุงูููุช ุงููุชุจูู: 60 ุฏูููุฉ
           ุงูุญุงูุฉ: ูุดุทุฉ โ

2:15 PM โ ุจุนุฏ 10 ุฏูุงุฆู
           ุงูููุฏ: ABC123
           ุงูููุช ุงููุชุจูู: 50 ุฏูููุฉ
           ุงูุญุงูุฉ: ูุดุทุฉ โ

2:45 PM โ ุจุนุฏ 40 ุฏูููุฉ
           ุงูููุฏ: ABC123
           ุงูููุช ุงููุชุจูู: 20 ุฏูููุฉ
           ุงูุญุงูุฉ: ูุดุทุฉ โ

3:05 PM โ ุจุนุฏ ุณุงุนุฉ
           ุงูููุฏ: ABC123
           ุงูููุช ุงููุชุจูู: ุงูุชูุช
           ุงูุญุงูุฉ: ููุชููุฉ โ
           ุงููุณู: ุงูุฌูุณุงุช ุงูุณุงุจูุฉ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐จ ุงููุงุฌูุฉ:

### ุงูุฌูุณุงุช ุงููุดุทุฉ (< 1 ุณุงุนุฉ):
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ English (CS300)               โ
โ ๐ข ูุดุท                          โ
โ โฐ ุงูููุช ุงููุชุจูู: 45 ุฏูููุฉ      โ
โ                                  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ      ููุฏ ุงูุญุถูุฑ              โ โ
โ โ      ABC123                  โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                  โ
โ [ูุณุฎ ุงูููุฏ] [ุฅููุงู] [ุญุฐู]       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงูุฌูุณุงุช ุงูุณุงุจูุฉ (> 1 ุณุงุนุฉ):
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ English (CS300)               โ
โ 14 ุฏูุณูุจุฑ 2024ุ 2:05 ู          โ
โ                                  โ
โ ุงูููุฏ: ABC123                    โ
โ ๐ด ููุชููุฉ                       โ
โ                                  โ
โ [ุญุฐู] ๐๏ธ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูููุฒุงุช ุงููููุนููุฉ:

### 1. ุฅูุดุงุก ุฌูุณุงุช โ
- ุงุฎุชูุงุฑ ุงููุงุฏุฉ
- ุงููุฏุฉ ุงูุงูุชุฑุงุถูุฉ: 15 ุฏูููุฉ (ูููู ุงูุชุบููุฑ)
- ุชูููุฏ ููุฏ ุชููุงุฆู

### 2. ุงูุนุฏุงุฏ ุงูุชูุงุฒูู โ
- ูุจุฏุฃ ูู 60 ุฏูููุฉ
- ูุชุญุฏุซ ูู 30 ุซุงููุฉ
- ูุนุฑุถ ุจุงูุฏูุงุฆู

### 3. ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ โ
- ุงูุฌูุณุงุช ุงููุดุทุฉ: ูู ุงูุฃุนูู
- ุงูุฌูุณุงุช ุงูููุชููุฉ: ูู ุงูุฃุณูู

### 4. ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช โ
- ูุณุฎ ุงูููุฏ
- ุฅููุงู ุงูุฌูุณุฉ (ุญุฐู ูุจุงุดุฑ)
- ุญุฐู ุงูุฌูุณุฉ

---

## ๐ ููุงุญุธุฉ ูููุฉ:

**ูุฏุฉ ุงูุฌูุณุฉ ุงููุนููุฉ: 60 ุฏูููุฉ (ุณุงุนุฉ ูุงุญุฏุฉ)**

ุฅุฐุง ุฃุฑุฏุช ุชุบููุฑูุง ูู 3 ุฏูุงุฆู (ููุง ุทูุจุช ุณุงุจูุงู):
```javascript
// ูู SessionManagement.tsx
const isSessionExpired = (created_at: string) => {
  const createdTime = new Date(created_at);
  const now = new Date();
  const minutesPassed = (now.getTime() - createdTime.getTime()) / 60000;
  return minutesPassed > 3; // ุชุบููุฑ ูู 60 ุฅูู 3
};
```

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
โ ูุง ุฃุฎุทุงุก ูู Console
โ ุฅูุดุงุก ุงูุฌูุณุงุช ูุนูู
โ ุนุฑุถ ุงูุฌูุณุงุช ูุนูู
โ ุงูุนุฏุงุฏ ุงูุชูุงุฒูู ูุนูู
โ ุงูููุชุฑุฉ (ูุดุทุฉ/ููุชููุฉ) ุชุนูู
โ ูุณุฎ ุงูููุฏ ูุนูู
โ ุญุฐู ุงูุฌูุณุงุช ูุนูู
โ ูู ุดูุก ูุนูู 100%!
```

---

**๐ ุงูุขู ุฌุฑูุจ ุฅูุดุงุก ุฌูุณุฉ ูุณุชุฑู ุฃููุง ุชุนูู ุจุฏูู ุฃู ูุดุงูู! ๐**

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 14 ุฏูุณูุจุฑ 2024  
**ุงูุญุงูุฉ:** โ ููุตูุญ ููุนูู ุจุดูู ูุงูู
