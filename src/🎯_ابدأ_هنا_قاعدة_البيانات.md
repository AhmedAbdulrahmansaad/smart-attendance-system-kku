# ๐ฏ ุงุจุฏุฃ ููุง - ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

<div dir="rtl">

## ๐ ูุฑุญุจุงู!

ุชู ุจูุฌุงุญ ุฑุจุท ูุดุฑูุนู ุจูุงุนุฏุฉ ุจูุงูุงุช Supabase ูุฅูุดุงุก ุฌููุน ุงููููุงุช ุงููุทููุจุฉ. ุงูุขูุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ ููุจุฏุก:

---

## โ ุงูุฎุทูุฉ 1: ุชุฃูุฏ ูู ุงูุงุชุตุงู

ุงููุดุฑูุน ูุชุตู ุจุงููุนู ุจู Supabase:

```
๐ Project URL: https://pcymgqdjbdklrikdquih.supabase.co
โ Status: Connected
```

ุชู ุชุญุฏูุซ ููู `/utils/supabase/info.tsx` ุจุงูุจูุงูุงุช ุงูุตุญูุญุฉ.

---

## ๐ ุงูุฎุทูุฉ 2: ููุฐ ููุฏ SQL

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (ููุตู ุจูุง):

1. **ุงูุชุญ Supabase Dashboard:**
   ```
   https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih
   ```

2. **ุงุฐูุจ ุฅูู SQL Editor:**
   - ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุถุบุท ุนูู "SQL Editor"

3. **ููุฐ ุงูููุฏ:**
   - ุงูุชุญ ููู: **`COMPLETE_DATABASE_SETUP.sql`**
   - ุงูุณุฎ ูู ุงููุญุชูู (Ctrl+A ุซู Ctrl+C)
   - ุงูุตู ูู SQL Editor
   - ุงุถุบุท "Run" (Ctrl+Enter)
   - ุงูุชุธุฑ ุฑุณุงูุฉ "Success" โ

**ุงูููุช ุงููุชููุน:** 2-3 ุฏูุงุฆู

---

## ๐ค ุงูุฎุทูุฉ 3: ุฃูุดุฆ ูุณุชุฎุฏู Admin

1. **ุงุฐูุจ ุฅูู Authentication > Users ูู Supabase Dashboard**

2. **ุฃูุดุฆ ูุณุชุฎุฏู ุฌุฏูุฏ:**
   - Email: `admin@kku.edu.sa`
   - Password: [ุงุฎุชุฑ ูููุฉ ูุฑูุฑ ูููุฉ]
   - โ ูุนูู "Auto Confirm Email"

3. **ุงูุณุฎ UUID ุงููุณุชุฎุฏู:**
   - ุจุนุฏ ุงูุฅูุดุงุกุ ุงูุณุฎ ุงูู `id` (UUID)

4. **ุฃุถู ุจูุงูุงุช Profile:**
   - ุงุฑุฌุน ุฅูู SQL Editor
   - ููุฐ:
   ```sql
   INSERT INTO public.profiles (id, email, full_name, role) 
   VALUES ('UUID-ููุง', 'admin@kku.edu.sa', 'ูุฏูุฑ ุงููุธุงู', 'admin');
   ```
   - ุงุณุชุจุฏู `UUID-ููุง` ุจุงูู UUID ุงูุฐู ูุณุฎุชู

---

## ๐งช ุงูุฎุทูุฉ 4: ุงุฎุชุจุฑ ุงููุธุงู

1. **ุงูุชุญ ุงููุดุฑูุน:**
   ```bash
   npm run dev
   ```

2. **ุณุฌู ุฏุฎูู:**
   - Email: `admin@kku.edu.sa`
   - Password: [ูููุฉ ุงููุฑูุฑ ุงูุชู ุฃูุดุฃุชูุง]

3. **ูุฌุจ ุฃู ุชุฑู:**
   - โ ููุญุฉ ุชุญูู Admin
   - โ ุฅููุงููุฉ ุฅุถุงูุฉ ูุณุชุฎุฏููู
   - โ ุฅููุงููุฉ ุฅูุดุงุก ููุงุฏ ุฏุฑุงุณูุฉ

---

## ๐ ุงููููุงุช ุงููููุดุฃุฉ

ุชู ุฅูุดุงุก 5 ูููุงุช ูููุฉ ูู:

### 1. ููู SQL ุงููุงูู โญ
๐ **`COMPLETE_DATABASE_SETUP.sql`**
- **650+ ุณุทุฑ** ูู ููุฏ SQL
- **6 ุฌุฏุงูู** ุฑุฆูุณูุฉ
- **20+ Index** ููุฃุฏุงุก
- **20+ RLS Policy** ููุฃูุงู
- **3 Triggers** ุชููุงุฆูุฉ
- **2 Views** ููุชูุงุฑูุฑ
- **ุฏุนู Realtime**

### 2. ุฏููู ุงูุชูููุฐ ุงูุนุฑุจู
๐ **`ุฏููู_ุชูููุฐ_ูุงุนุฏุฉ_ุงูุจูุงูุงุช.md`**
- ุดุฑุญ ููุตู ุฎุทูุฉ ุจุฎุทูุฉ
- ุทุฑููุชูู ููุชูููุฐ (Dashboard / CLI)
- ุฃูุซูุฉ ูุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ
- ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ
- ุงุณุชุนูุงูุงุช ุงูุชุญูู

### 3. ุฏููู ุงูุชูููุฐ ุงูุฅูุฌููุฒู
๐ **`DATABASE_EXECUTION_GUIDE_EN.md`**
- Step-by-step instructions
- Two execution methods
- Sample data examples
- Troubleshooting

### 4. ุฏููู ุงูุจุฏุก ุงูุณุฑูุน
๐ **`๐_ูุงุนุฏุฉ_ุงูุจูุงูุงุช_ุฌุงูุฒุฉ.md`**
- ููุฎุต ุณุฑูุน
- ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูููุฒุงุช ุงูููุนูุฉ
- ุงูุฃุฏูุงุฑ ุงููุฏุนููุฉ

### 5. ุงุณุชุนูุงูุงุช SQL ูููุฏุฉ
๐ **`USEFUL_SQL_QUERIES.md`**
- 50+ ุงุณุชุนูุงู ุฌุงูุฒ
- ุงุณุชุนูุงูุงุช ุงูุชุญูู
- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
- ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช
- ุงูุตูุงูุฉ ูุงูุชูุธูู

---

## ๐ฏ ูุงุฐุง ูุญุชูู ููู SQLุ

### ุงูุฌุฏุงูู (6):
1. โ **profiles** - ูุนูููุงุช ุงููุณุชุฎุฏููู
2. โ **courses** - ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ
3. โ **enrollments** - ุชุณุฌูู ุงูุทูุงุจ
4. โ **sessions** - ุฌูุณุงุช ุงูุญุถูุฑ ูุงูุจุซ
5. โ **attendance** - ุณุฌูุงุช ุงูุญุถูุฑ
6. โ **schedules** - ุฌุฏุงูู ุงููุญุงุถุฑุงุช

### ุงูููุฒุงุช:
- โ **RLS Policies** - ุฃูุงู ูุงูู ุนูู ูู ุฌุฏูู
- โ **Indexes** - ุฃุฏุงุก ุนุงูู (20+ ููุฑุณ)
- โ **Triggers** - ุชุญุฏูุซุงุช ุชููุงุฆูุฉ
- โ **Views** - ุชูุงุฑูุฑ ุฌุงูุฒุฉ
- โ **Foreign Keys** - ุนูุงูุงุช ุจูู ุงูุฌุฏุงูู
- โ **Realtime** - ุชุญุฏูุซุงุช ููุฑูุฉ

---

## ๐ ุงูุฃูุงู

### Row Level Security (RLS):
- โ ููุนูู ุนูู **ุฌููุน** ุงูุฌุฏุงูู (6/6)
- โ **20+ ุณูุงุณุฉ** ูุญุฏุฏุฉ ููู ุฏูุฑ
- โ Admin ูุฑู ูู ุดูุก
- โ Instructor ูุฑู ุทูุงุจู ูููุงุฏู ููุท
- โ Student ูุฑู ุจูุงูุงุชู ุงูุดุฎุตูุฉ ููุท

### ููุงุนุฏ ุงูุชุญูู:
- โ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: **@kku.edu.sa** ููุท
- โ ุงูุฑูู ุงูุฌุงูุนู ููุทูุงุจ: **9 ุฃุฑูุงู ุชุจุฏุฃ ุจู 44**
- โ ููุน ุงูุชุณุฌูู ุงูููุฑุฑ
- โ ููุน ุชุณุฌูู ุงูุฏุฎูู ุงููุชุฒุงูู

---

## ๐ ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ (Realtime)

ุชู ุชูุนูู Realtime ุนูู:
- โ **sessions** - ููุจุซ ุงููุจุงุดุฑ
- โ **attendance** - ูุชุญุฏูุซุงุช ุงูุญุถูุฑ
- โ **enrollments** - ูุชุญุฏูุซุงุช ุงูุชุณุฌูู

---

## ๐ ุงูุชูุงุฑูุฑ ุงูุฌุงูุฒุฉ

### 1. Attendance Summary
```sql
SELECT * FROM attendance_summary;
```
ูุนุฑุถ: ูุณุจุฉ ุญุถูุฑ ูู ุทุงูุจ ูู ูู ูุงุฏุฉ

### 2. Course Statistics
```sql
SELECT * FROM course_statistics;
```
ูุนุฑุถ: ุฅุญุตุงุฆูุงุช ูู ูุงุฏุฉ (ุนุฏุฏ ุงูุทูุงุจุ ุงูุฌูุณุงุชุ ุฅูุฎ)

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชูููุฐ SQLุ ููุฐ ูุฐู ุงูุงุณุชุนูุงูุงุช ููุชุญูู:

### 1. ุนุฏุฏ ุงูุฌุฏุงูู (ูุฌุจ: 6)
```sql
SELECT COUNT(*) FROM information_schema.tables 
WHERE table_schema = 'public';
```

### 2. ุนุฏุฏ ุงูููุงุฑุณ (ูุฌุจ: 20+)
```sql
SELECT COUNT(*) FROM pg_indexes 
WHERE schemaname = 'public';
```

### 3. ุนุฏุฏ ุงูุณูุงุณุงุช (ูุฌุจ: 20+)
```sql
SELECT COUNT(*) FROM pg_policies 
WHERE schemaname = 'public';
```

### 4. ุนุฏุฏ ุงููุญูุฒุงุช (ูุฌุจ: 3)
```sql
SELECT COUNT(*) FROM information_schema.triggers 
WHERE trigger_schema = 'public';
```

---

## ๐ ุงูุฃุฏูุงุฑ ุงููุฏุนููุฉ

ุงููุธุงู ูุฏุนู 4 ุฃุฏูุงุฑ:

### 1. Admin (ุงููุฏูุฑ)
```
โ ุฑุคูุฉ ุฌููุน ุงูุจูุงูุงุช
โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
โ ุฅุฏุงุฑุฉ ุงูููุงุฏ
โ ุนุฑุถ ุฌููุน ุงูุชูุงุฑูุฑ
```

### 2. Instructor (ุงููุฏุฑุณ)
```
โ ุฅูุดุงุก ุงูููุงุฏ
โ ุฅูุดุงุก ุฌูุณุงุช ุงูุญุถูุฑ
โ ุจุซ ูุจุงุดุฑ
โ ุนุฑุถ ุณุฌูุงุช ุทูุงุจู
```

### 3. Student (ุงูุทุงูุจ)
```
โ ุงูุชุณุฌูู ูู ุงูููุงุฏ
โ ุชุณุฌูู ุงูุญุถูุฑ
โ ูุดุงูุฏุฉ ุงูุจุซ ุงููุจุงุดุฑ
โ ุนุฑุถ ุณุฌูุงุชู
```

### 4. Supervisor (ุงููุดุฑู)
```
โ ูุฑุงูุจุฉ ุงููุธุงู
โ ุนุฑุถ ุงูุชูุงุฑูุฑ
โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
```

---

## ๐งช ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

ุฅุฐุง ุฃุฑุฏุช ุงุฎุชุจุงุฑ ุงููุธุงู ุจุจูุงูุงุช ุชุฌุฑูุจูุฉ:

### ุงูููุฌูุฏ ูู ููู SQL (SECTION 9):
- ูุซุงู ูุณุชุฎุฏู Admin
- ูุซุงู ูุฏุฑุณ
- ูุซุงู ุทุงูุจูู
- ูุซุงู ูุงุฏุฉ ุฏุฑุงุณูุฉ

**ููุงุญุธุฉ:** ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ูุนูููุฉ ุจุงูุงูุชุฑุงุถ. ุงุญุฐู ุงูุชุนููู `/* */` ูุชูุนูููุง.

---

## โ๏ธ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ูุดููุฉ: "relation already exists"
**ุงูุญู:** ุงูุฌุฏุงูู ููุฌูุฏุฉ ุจุงููุนู. ุงุญุฐู ุงูุฌุฏุงูู ุงููุฏููุฉ ุฃู ุงุณุชุฎุฏู SECTION 1 ูู ููู SQL.

### ูุดููุฉ: "permission denied"
**ุงูุญู:** ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ูู Admin ูู Supabase Dashboard.

### ูุดููุฉ: "RLS policy violation"
**ุงูุญู:** ุชุฃูุฏ ูู ุชุทุจูู ุฌููุน ุงูู Policies ูู ููู SQL.

### ูุดููุฉ: "trigger already exists"
**ุงูุญู:** ุงุญุฐู ุงูู Triggers ุงููุฏููุฉ ุฃููุงู:
```sql
DROP TRIGGER IF EXISTS on_auth_user_created ON auth.users;
DROP TRIGGER IF EXISTS update_profiles_updated_at ON public.profiles;
DROP TRIGGER IF EXISTS update_courses_updated_at ON public.courses;
```

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ูููุฒูุฏ ูู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน:

1. **ููุชูููุฐ ุงูููุตู:**
   - ๐ `ุฏููู_ุชูููุฐ_ูุงุนุฏุฉ_ุงูุจูุงูุงุช.md`
   - ๐ `DATABASE_EXECUTION_GUIDE_EN.md`

2. **ููุงุณุชุนูุงูุงุช:**
   - ๐ `USEFUL_SQL_QUERIES.md`

3. **ูุญู ุงููุดุงูู:**
   - ๐ง `TROUBLESHOOTING_AR.md`
   - ๐ง `DATABASE_VERIFICATION_GUIDE.md`

4. **ูููุดุฑ:**
   - ๐ `DEPLOYMENT_GUIDE_AR.md`
   - ๐ `VERCEL_DEPLOYMENT.md`

### ุชุญูู ูู Console:
```
ุงูุชุญ Browser Console (F12)
ุฑุงุฌุน Network Tab
ุฑุงุฌุน Errors
```

### ุชุญูู ูู Supabase Logs:
```
Dashboard > Logs > Database
Dashboard > Logs > Functions
```

---

## ๐ ุฎูุงุตุฉ

ุจุนุฏ ุฅุชูุงู ุงูุฎุทูุงุช ุฃุนูุงูุ ูุธุงูู ุณูููู:

```
โ ูุชุตู ุจูุงุนุฏุฉ ุจูุงูุงุช Supabase
โ 6 ุฌุฏุงูู ููุดุฃุฉ
โ 20+ ููุฑุณ ููุฃุฏุงุก
โ 20+ ุณูุงุณุฉ ููุฃูุงู
โ 3 ูุญูุฒุงุช ุชููุงุฆูุฉ
โ 2 ุนุฑูุถ ููุชูุงุฑูุฑ
โ ุฏุนู Realtime ููุนูู
โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงููุนูู
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

### 1. ููุชุทููุฑ:
```bash
npm install
npm run dev
```

### 2. ูููุดุฑ:
```bash
# ุฑุงุฌุน DEPLOYMENT_GUIDE_AR.md
vercel --prod
```

### 3. ูุฅุถุงูุฉ ููุฒุงุช:
```bash
# ุฑุงุฌุน CONTRIBUTING.md
# ุฑุงุฌุน API_REFERENCE.md
```

---

## โญ ูููุฒุงุช ุงููุธุงู

```
โ ุฏุนู ูุงูู ููุบุชูู (ุนุฑุจู/ุฅูุฌููุฒู)
โ ุฏุนู RTL/LTR
โ 4 ุฃุฏูุงุฑ ูุฎุชููุฉ
โ ุชุณุฌูู ุญุถูุฑ ุฐูู
โ ุจุซ ูุจุงุดุฑ (Jitsi Meet)
โ ุฅุดุนุงุฑุงุช ููุฑูุฉ
โ ุชูุงุฑูุฑ ูุฅุญุตุงุฆูุงุช
โ ูุงุฌูุฉ ุงุญุชุฑุงููุฉ
โ ุฃูุงู ูุชูุฏู (RLS)
โ ุชุญุฏูุซุงุช ููุฑูุฉ (Realtime)
โ ุงุณุชุฌุงุจุฉ ูุงููุฉ (Responsive)
โ ูุงุนุฏุฉ ุจูุงูุงุช ุขููุฉ (PostgreSQL)
```

---

## ๐ฏ ููุฎุต ุณุฑูุน

### โ ูุง ุชู ุฅูุฌุงุฒู:
1. โ ุฑุจุท ุงููุดุฑูุน ุจู Supabase
2. โ ุชุญุฏูุซ ูููุงุช ุงูุงุชุตุงู
3. โ ุฅูุดุงุก ููู SQL ูุงูู (650+ ุณุทุฑ)
4. โ ุฅูุดุงุก 5 ูููุงุช ุชูุซูู
5. โ ุฌุงูุฒ ููุชูููุฐ

### ๐ ูุง ุชุญุชุงุฌ ุนููู:
1. โณ ุชูููุฐ SQL ูู Supabase
2. โณ ุฅูุดุงุก ูุณุชุฎุฏู Admin
3. โณ ุงุฎุชุจุงุฑ ุงููุธุงู
4. โณ ุงูุจุฏุก ูู ุงูุงุณุชุฎุฏุงู

---

**๐ ูุธุงู ุงูุญุถูุฑ ุงูุฐูู - ุฌุงูุนุฉ ุงูููู ุฎุงูุฏ**  
**๐ ุชู ุงูุฅูุดุงุก: ุฏูุณูุจุฑ 2025**  
**โจ Version: 1.0 - Production Ready**  
**๐ Supabase: Connected & Ready**

---

**ุงุจุฏุฃ ุงูุขู! ููุฐ ุงูุฎุทูุงุช ุฃุนูุงู ูุณุชููู ุฌุงูุฒุงู ูู ุฃูู ูู 5 ุฏูุงุฆู! ๐**

</div>
