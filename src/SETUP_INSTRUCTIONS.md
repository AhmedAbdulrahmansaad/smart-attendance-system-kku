# ๐ ุชุนูููุงุช ุงูุฅุนุฏุงุฏ ุงููุงููุฉ - Setup Instructions

<div dir="rtl">

## ๐ **ุฎุทูุฉ ุจุฎุทูุฉ - ูุง ุชููุช ุฃู ุฎุทูุฉ!**

---

## **ุงููุฑุญูุฉ 1: ุฅุตูุงุญ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Supabase**

### **ุงูุฎุทูุฉ 1.1: ุงูุชุญ Supabase Dashboard**
```
1. ุงุฐูุจ ุฅูู: https://supabase.com/dashboard
2. ุงูุชุญ ูุดุฑูุนู: pcymgqdjbdklrikdquih
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุถุบุท ุนูู "SQL Editor"
```

---

### **ุงูุฎุทูุฉ 1.2: ููุฐ SQL Script**
```
1. ูู SQL Editorุ ุงุถุบุท "New Query"
2. ุงูุณุฎ **ูู** ูุญุชูู ููู DATABASE_SETUP.sql
3. ุงูุตูู ูู Query Editor
4. ุงุถุบุท "Run" (ุฃู Ctrl+Enter)
5. ุงูุชุธุฑ ุญุชู ูุธูุฑ "Success" โ
```

โ๏ธ **ููู ุฌุฏุงู:**
```
ูุฐุง ุงูุณูุฑุจุช ุณูู:
โ ูุญุฐู ุงูุฌุฏุงูู ุงููุฏููุฉ
โ ููุดุฆ ุฌุฏุงูู ุฌุฏูุฏุฉ ุจุงูุฃุนูุฏุฉ ุงูุตุญูุญุฉ
โ ูุถูู Indexes ููุณุฑุนุฉ
โ ููุนูู Row Level Security (RLS)
โ ูุถูู Policies ููุฃูุงู
```

---

### **ุงูุฎุทูุฉ 1.3: ุชุญูู ูู ุงูุฌุฏุงูู**
```sql
-- ููุฐ ูุฐุง ุงูุงุณุชุนูุงู ููุชุญูู:
SELECT table_name, column_name, data_type 
FROM information_schema.columns 
WHERE table_schema = 'public' 
  AND table_name = 'courses'
ORDER BY table_name, ordinal_position;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ courses ูุญุชูู ุนูู:
   โข id (uuid)
   โข course_code (text)
   โข course_name (text)
   โข instructor_id (uuid)
   โข department (text)
   โข credits (integer)
   โข semester (text) โ **ููุฌูุฏ!**
   โข year (text) โ **ููุฌูุฏ!**
   โข description (text)
   โข is_active (boolean)
   โข created_at (timestamp)
   โข updated_at (timestamp)
```

---

## **ุงููุฑุญูุฉ 2: ุฅูุดุงุก ูุณุชุฎุฏู Admin**

### **ุงูุฎุทูุฉ 2.1: ุณุฌู ุญุณุงุจ Admin**
```
1. ุงูุชุญ ุงูุชุทุจูู
2. ุงุฐูุจ ุฅูู ุตูุญุฉ Sign Up
3. ุณุฌู ุจูุฐู ุงูุจูุงูุงุช:
   โข Email: admin@kku.edu.sa
   โข Password: (ูููุฉ ุณุฑ ูููุฉ)
   โข Full Name: System Admin
   โข Role: admin
4. ุงุถุบุท "Sign Up"
```

---

### **ุงูุฎุทูุฉ 2.2: ูุนูู ุงูุญุณุงุจ ูุฏููุงู ูู Supabase**
```
1. ูู Supabase Dashboard โ "Authentication" โ "Users"
2. ุงุจุญุซ ุนู admin@kku.edu.sa
3. ุงุถุบุท ุนูู ุงููุณุชุฎุฏู
4. ุชุฃูุฏ ูู:
   โ Email Confirmed = true
   โ User is active
```

---

### **ุงูุฎุทูุฉ 2.3: ุชุญุฏูุซ ุงูู Role ูู profiles**
```sql
-- ููุฐ ูุฐุง ูู SQL Editor:
UPDATE profiles 
SET role = 'admin' 
WHERE email = 'admin@kku.edu.sa';
```

---

## **ุงููุฑุญูุฉ 3: ุฅูุดุงุก ุจูุงูุงุช ุงุฎุชุจุงุฑูุฉ**

### **ุงูุฎุทูุฉ 3.1: ุฃูุดุฆ ูุฏุฑุณ**
```
1. ุณุฌู ุฏุฎูู ูู Admin
2. ุงุฐูุจ ุฅูู "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู"
3. ุฃูุดุฆ ูุฏุฑุณ:
   โข Email: instructor1@kku.edu.sa
   โข Full Name: ุฏ. ูุญูุฏ ุฃุญูุฏ
   โข Role: instructor
   โข University ID: T001234
```

---

### **ุงูุฎุทูุฉ 3.2: ุฃูุดุฆ ุทูุงุจ**
```
ุฃูุดุฆ 3 ุทูุงุจ ููุงุฎุชุจุงุฑ:

ุงูุทุงูุจ 1:
โข Email: student1@kku.edu.sa
โข Full Name: ุฃุญูุฏ ูุญูุฏ
โข Role: student
โข University ID: 441234567 (9 ุฃุฑูุงู ุชุจุฏุฃ ุจู 44)

ุงูุทุงูุจ 2:
โข Email: student2@kku.edu.sa
โข Full Name: ูุงุทูุฉ ุนูู
โข Role: student
โข University ID: 441234568

ุงูุทุงูุจ 3:
โข Email: student3@kku.edu.sa
โข Full Name: ูุญููุฏ ุณุนูุฏ
โข Role: student
โข University ID: 441234569
```

---

## **ุงููุฑุญูุฉ 4: ุงุฎุชุจุงุฑ ุฅุถุงูุฉ ููุฑุฑ**

### **ุงูุฎุทูุฉ 4.1: ุณุฌู ุฏุฎูู ููุฏุฑุณ**
```
1. ุณุฌู ุฎุฑูุฌ ูู Admin
2. ุณุฌู ุฏุฎูู ุจุญุณุงุจ ุงููุฏุฑุณ:
   โข Email: instructor1@kku.edu.sa
   โข Password: (ูููุฉ ุงูุณุฑ ุงูุชู ุฃูุดุฃุชูุง)
```

---

### **ุงูุฎุทูุฉ 4.2: ุฃุถู ููุฑุฑ**
```
1. ุงุฐูุจ ุฅูู "ุงูููุฑุฑุงุช ุงูุฏุฑุงุณูุฉ"
2. ุงุถุบุท "ุฅุถุงูุฉ ููุฑุฑ ุฌุฏูุฏ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   โข ุงุณู ุงููุงุฏุฉ: ุงูุจุฑูุฌุฉ ุงููุชูุฏูุฉ
   โข ููุฏ ุงููุงุฏุฉ: CS301
   โข ุงููุตู ุงูุฏุฑุงุณู: Fall
   โข ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ: 2024
   โข ุงูุณุงุนุงุช: 3
4. ุงุถุบุท "ุฅุถุงูุฉ ููุฑุฑ"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ "ุชู ุฅุถุงูุฉ ุงูููุฑุฑ ุจูุฌุงุญ!"
โ ุงูููุฑุฑ ูุธูุฑ ูู ุงููุงุฆูุฉ
โ ูุง ุฃุฎุทุงุก ูู Console
```

---

### **ุงูุฎุทูุฉ 4.3: ุณุฌู ุทูุงุจ ูู ุงูููุฑุฑ**
```
1. ูู ุตูุญุฉ ุงูููุฑุฑุงุชุ ุงุถุบุท "ุชุณุฌูู ุทุงูุจ"
2. ุงุฎุชุฑ ุงูุทุงูุจ: ุฃุญูุฏ ูุญูุฏ
3. ุงุถุบุท "ุชุณุฌูู"
4. ูุฑุฑ ุงูุนูููุฉ ููุทุงูุจูู ุงูุขุฎุฑูู
```

---

## **ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ ุฌูุณุฉ ุญุถูุฑ**

### **ุงูุฎุทูุฉ 5.1: ุฃูุดุฆ ุฌูุณุฉ**
```
1. ุงุฐูุจ ุฅูู "ุฌูุณุงุช ุงูุญุถูุฑ"
2. ุงุถุบุท "ุฅูุดุงุก ุฌูุณุฉ ุฌุฏูุฏุฉ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   โข ุงูููุฑุฑ: CS301 - ุงูุจุฑูุฌุฉ ุงููุชูุฏูุฉ
   โข ุงูุนููุงู: ูุญุงุถุฑุฉ 1
   โข ุงููุฏุฉ: 15 ุฏูููุฉ
4. ุงุถุบุท "ุฅูุดุงุก ุฌูุณุฉ"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ุฌูุณุฉ ุฌุฏูุฏุฉ ุชููุดุฃ
โ ููุฏ ุนุดูุงุฆู ูุธูุฑ (ูุซู: H3K7N9)
โ ุฒุฑ "ูุณุฎ ุงูููุฏ" ูุนูู
โ ูุคูุช ูุจุฏุฃ ุงูุนุฏ ุงูุชูุงุฒูู
```

---

### **ุงูุฎุทูุฉ 5.2: ุณุฌู ุญุถูุฑ ุทุงูุจ**
```
1. ุณุฌู ุฎุฑูุฌ ูู ุงููุฏุฑุณ
2. ุณุฌู ุฏุฎูู ูุทุงูุจ (student1@kku.edu.sa)
3. ุงุฐูุจ ุฅูู "ุชุณุฌูู ุงูุญุถูุฑ"
4. tab "ุงูููุฏ"
5. ุฃุฏุฎู ุงูููุฏ: H3K7N9 (ุงูููุฏ ุงูุฐู ูุณุฎุชู)
6. ุงุถุบุท "ุชุณุฌูู ุงูุญุถูุฑ"
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ "ุชู ุชุณุฌูู ุญุถูุฑู ุจูุฌุงุญ!" โ
โ Toast notification ุฃุฎุถุฑ
โ ูุง ูููู ุงูุชุณุฌูู ูุฑุฉ ุฃุฎุฑู (duplicate error)
```

---

## **ุงููุฑุญูุฉ 6: ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ**

### **ุงูุฎุทูุฉ 6.1: ุนุฑุถ ุงูุชูุฑูุฑ**
```
1. ุณุฌู ุฎุฑูุฌ ูู ุงูุทุงูุจ
2. ุณุฌู ุฏุฎูู ููุฏุฑุณ
3. ุงุฐูุจ ุฅูู "ุชูุงุฑูุฑ ุงูุญุถูุฑ"
4. ุงุฎุชุฑ ุงูููุฑุฑ: CS301
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ููุฎุต ุงูุฅุญุตุงุฆูุงุช:
   โข ุฅุฌูุงูู ุงูุทูุงุจ: 3
   โข ูุชูุณุท ุงูุญุถูุฑ: 33% (1 ูู 3)
   โข ุทูุงุจ ููุชุงุฒูู: 1
   โข ูุญุชุงุฌูู ูุชุงุจุนุฉ: 2

โ ุฌุฏูู ููุตู:
   โข ุฃุญูุฏ ูุญูุฏ: 1/1 (100%) โ ุฃุฎุถุฑ
   โข ูุงุทูุฉ ุนูู: 0/0 (0%) โ ุฑูุงุฏู
   โข ูุญููุฏ ุณุนูุฏ: 0/0 (0%) โ ุฑูุงุฏู
```

---

### **ุงูุฎุทูุฉ 6.2: ุชุตุฏูุฑ CSV**
```
1. ุงุถุบุท "ุชุตุฏูุฑ CSV"
2. ูุชู ุชุญููู ููู CSV
3. ุงูุชุญ ุงูููู ูู Excel
4. ุชุฃูุฏ ูู ุฃู ุงูุนุฑุจูุฉ ุชุธูุฑ ุตุญูุญุฉ (UTF-8)
```

---

## **ุงููุฑุญูุฉ 7: ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก**

### **ุงูุฎุทูุฉ 7.1: ุงูุชุญ Console**
```
1. ุงุถุบุท F12 ููุชุญ Developer Tools
2. ุงุฐูุจ ุฅูู Console tab
3. ุงุถุบุท F5 ูุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
```

**ูุง ูุฌุจ ุฃู ุชุฑุงู:**
```
โ ูุง ุฃุฎุทุงุก ุญูุฑุงุก
โ ุฑุณุงุฆู ุฎุถุฑุงุก:
   โข โ [CourseManagement] Loaded X courses
   โข โ [SessionManagement] Loaded X sessions
   โข โ [useStudentData] Loaded X courses
   โข โ [AuthContext] User loaded
```

---

### **ุงูุฎุทูุฉ 7.2: ุงุฎุชุจุงุฑ ุงูุณุฑุนุฉ**
```
1. ูู Consoleุ ุงูุชุจ:
   console.time('load');
   
2. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (F5)

3. ูู Consoleุ ุงูุชุจ:
   console.timeEnd('load');
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โก load: 300-800ms โ ููุชุงุฒ!
โก load: 800-1500ms โ ุฌูุฏ
โ๏ธ load: >2000ms โ ุจุทูุก (ุชุญูู ูู ุงูู Indexes)
```

---

## **ุงููุฑุญูุฉ 8: ุชุญุณูู ุงูุฃุฏุงุก (Performance)**

### **ุงูุฎุทูุฉ 8.1: ุชูุนูู Connection Pooling**
```
1. ูู Supabase Dashboard โ "Settings" โ "Database"
2. ุงุจุญุซ ุนู "Connection Pooling"
3. ูุนูู:
   โ Session Mode
   โ Transaction Mode
4. ุงุณุชุฎุฏู Connection Pooling URL ูู Production
```

---

### **ุงูุฎุทูุฉ 8.2: ุชูุนูู Realtime (ุงุฎุชูุงุฑู)**
```
1. ูู Supabase Dashboard โ "Database" โ "Replication"
2. ูุนูู Replication ููุฌุฏุงูู:
   โ enrollments
   โ sessions
   โ attendance
3. ูุฐุง ูุฌุนู ุงูุชุญุฏูุซุงุช ููุฑูุฉ!
```

---

## **ุงููุฑุญูุฉ 9: ุงูุฃูุงู (Security)**

### **ุงูุฎุทูุฉ 9.1: ุชุญูู ูู RLS**
```sql
-- ูู SQL Editorุ ููุฐ:
SELECT tablename, policyname, permissive, roles, cmd, qual
FROM pg_policies
WHERE schemaname = 'public';
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ ูู ุฌุฏูู ูู policies ูุชุนุฏุฏุฉ
โ SELECT, INSERT, UPDATE, DELETE ูุญููุฉ
โ ูุง ูููู ููุทุงูุจ ุญุฐู ููุฑุฑุงุช
โ ูุง ูููู ููุทุงูุจ ุชุนุฏูู ุญุถูุฑ ุบูุฑู
```

---

### **ุงูุฎุทูุฉ 9.2: ุชุญูู ูู Indexes**
```sql
-- ูู SQL Editorุ ููุฐ:
SELECT 
    tablename, 
    indexname, 
    indexdef
FROM pg_indexes 
WHERE schemaname = 'public'
ORDER BY tablename, indexname;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
โ profiles: 4 indexes
โ courses: 4 indexes
โ enrollments: 5 indexes
โ sessions: 8 indexes
โ attendance: 8 indexes

ุฅุฌูุงูู: 29+ indexes ููุฃุฏุงุก ุงูููุชุงุฒ!
```

---

## **ุงููุฑุญูุฉ 10: ุงุฎุชุจุงุฑ ุงูููุงุฆู**

### **ุงุฎุชุจุงุฑ ุดุงูู:**
```
โ 1. Admin ูุถูู ูุฏุฑุณ ุฌุฏูุฏ
โ 2. ุงููุฏุฑุณ ูุถูู ููุฑุฑ ุฌุฏูุฏ
โ 3. Admin ูุณุฌู 10 ุทูุงุจ ูู ุงูููุฑุฑ
โ 4. ุงููุฏุฑุณ ููุดุฆ ุฌูุณุฉ ุญุถูุฑ
โ 5. 7 ุทูุงุจ ูุณุฌููู ุญุถูุฑูู
โ 6. ุงููุฏุฑุณ ูุฑู ุงูุชูุฑูุฑ
โ 7. ุงููุฏุฑุณ ูุตุฏุฑ CSV
โ 8. Supervisor ูุฑู ุงูุฅุญุตุงุฆูุงุช ุงูุดุงููุฉ
โ 9. ุงูุทุงูุจ ูุฑู ุณุฌู ุญุถูุฑู
โ 10. ูุง ุฃุฎุทุงุก ูู Console
```

---

## **โ ุงูุชุญูู ุงูููุงุฆู:**

### **Checklist:**
```
โ ุฌุฏูู courses ูุญุชูู ุนูู semester ู year
โ ูููู ุฅุถุงูุฉ ููุฑุฑ ุฌุฏูุฏ ุจุฏูู ุฃุฎุทุงุก
โ ูููู ุฅูุดุงุก ุฌูุณุฉ ุญุถูุฑ
โ ููุฏ ุงูุฌูุณุฉ ูุฑูุฏ (6 ุฃุญุฑู)
โ ุงูุทุงูุจ ููููู ุชุณุฌูู ุงูุญุถูุฑ
โ ูุง ูููู ุงูุชุณุฌูู ูุฑุชูู
โ ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุงูุจูุงูุงุช ุงูุตุญูุญุฉ
โ CSV ูุญุชูู ุนูู ุจูุงูุงุช ุตุญูุญุฉ
โ Console ูุธูู (ูุง ุฃุฎุทุงุก ุญูุฑุงุก)
โ ุงูุณุฑุนุฉ ุฌูุฏุฉ (<1 ุซุงููุฉ ููุชุญููู)
```

---

## **๐ฏ ุงููุชูุฌุฉ ุงููุชููุนุฉ:**

```
โ ุงููุธุงู ูุนูู 100%
โ ูุง ุฃุฎุทุงุก ูู Database
โ ูุง ุฃุฎุทุงุก ูู Console
โ ุณุฑูุน ุฌุฏุงู (ุญุชู ูุน 1000+ ูุณุชุฎุฏู)
โ ุขูู (RLS + Policies)
โ Realtime updates
โ Production ready!
```

---

## **๐จ ุฅุฐุง ูุงุฌูุช ูุดุงูู:**

### **ูุดููุฉ: "Could not find 'year' column"**
```
โ ุงูุญู:
   1. ุชุฃูุฏ ูู ุชูููุฐ DATABASE_SETUP.sql ุจุงููุงูู
   2. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ (Ctrl+F5)
   3. ุงูุณุญ Cache ุงููุชุตูุญ
```

---

### **ูุดููุฉ: "Permission denied"**
```
โ ุงูุญู:
   1. ุชุญูู ูู RLS Policies
   2. ุชุฃูุฏ ูู role ุงููุณุชุฎุฏู ุตุญูุญ
   3. ูู SQL Editor:
      UPDATE profiles SET role = 'admin' WHERE email = 'YOUR_EMAIL';
```

---

### **ูุดููุฉ: "Session expired"**
```
โ ุงูุญู:
   1. ุณุฌู ุฎุฑูุฌ
   2. ุณุฌู ุฏุฎูู ูุฑุฉ ุฃุฎุฑู
   3. ุงูุณุญ Cookies
```

---

### **ูุดููุฉ: ุงููุธุงู ุจุทูุก**
```
โ ุงูุญู:
   1. ุชุญูู ูู ุงูู Indexes (ุงูุฎุทูุฉ 9.2)
   2. ูุนูู Connection Pooling (ุงูุฎุทูุฉ 8.1)
   3. ุงุณุชุฎุฏู React Query caching (ููุฌูุฏ ุจุงููุนู)
```

---

</div>

## ๐ **ุงูุชูู! ูุธุงูู ุงูุขู ุฌุงูุฒ 100%!** ๐

### **ููุฏุนู:**
- ุงูุชุญ Console (F12) ูุฃุฑุณู ุงูุฃุฎุทุงุก ุฅู ูุฌุฏุช
- ุชุญูู ูู Supabase Logs ูู Dashboard
- ุชุฃูุฏ ูู ุชูููุฐ ุฌููุน ุงูุฎุทูุงุช ุจุงูุชุฑุชูุจ

---

**๐ ูุธุงู ุงูุญุถูุฑ ุงูุฐูู - ุฌุงูุนุฉ ุงูููู ุฎุงูุฏ ๐**
**King Khalid University Smart Attendance System**
