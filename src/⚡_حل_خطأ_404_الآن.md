# โก ุญู ุฎุทุฃ 404 ุงูุขู - 5 ุฏูุงุฆู ููุท!

---

## ๐ด ุงููุดููุฉ

```
โ API Error Response: 404 Not Found
โ๏ธ Edge Functions might not be deployed yet. Using fallback data.
```

---

## โ ุงูุญู (3 ุฃูุงูุฑ ููุท!)

### 1๏ธโฃ ููุฐ ูุฐุง ุงูุฃูุฑ:

```bash
chmod +x deploy-edge-function.sh && ./deploy-edge-function.sh
```

**ุณูุทูุจ ููู:**
- Service Role Key (ุงุญุตู ุนููู ูู [ููุง](https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/settings/api))

### 2๏ธโฃ ุชุทุจูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. ุงูุชุญ: https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/sql

2. ุงูุชุญ ููู `database_schema.sql` ูู ูุญุฑุฑ ูุตูุต

3. ุงูุณุฎ ุงููุญุชูู ูุงููุงู

4. ุงูุตูู ูู SQL Editor

5. ุงุถุบุท **Run** โ

### 3๏ธโฃ ุงุฎุชุจุฑ ุงููุธุงู:

```bash
chmod +x test-edge-function.sh && ./test-edge-function.sh
```

ูุฌุจ ุฃู ุชุฑู:
```
โ ุงุฎุชุจุงุฑุงุช ูุฌุญุช: 3 / 3
๐ Edge Function ูุนูู ุจุดูู ูุซุงูู!
```

---

## ๐ฏ ุฅุฐุง ูู ูุนูู ุงูุณูุฑุจุช

### ุงูุฎูุงุฑ 1: ุงููุดุฑ ุงููุฏูู (5 ุฏูุงุฆู)

```bash
# 1. ุชุซุจูุช Supabase CLI
npm install -g supabase

# 2. ุชุณุฌูู ุงูุฏุฎูู
supabase login

# 3. ุฑุจุท ุงููุดุฑูุน
supabase link --project-ref pcymgqdjbdklrikdquih

# 4. ุชุนููู Environment Variables
supabase secrets set \
  SUPABASE_URL="https://pcymgqdjbdklrikdquih.supabase.co" \
  SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBjeW1ncWRqYmRrbHJpa2RxdWloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4MTU3ODcsImV4cCI6MjA3ODM5MTc4N30.OTHtmMPSb2AAdSBHM19JY20gb4DzLzd8zILCN-zUvoQ" \
  SUPABASE_SERVICE_ROLE_KEY="YOUR_SERVICE_ROLE_KEY_HERE"

# 5. ูุดุฑ Edge Function
supabase functions deploy server
```

**โ๏ธ ุงุณุชุจุฏู `YOUR_SERVICE_ROLE_KEY_HERE` ุจุงูู Service Role Key ุงูุญูููู!**

### ุงูุฎูุงุฑ 2: ุงููุดุฑ ูู Dashboard (ุฃุณูู!)

1. ุงูุชุญ: https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/functions

2. ุงุถุบุท **Deploy new function**

3. ุงูุงุณู: `server`

4. ุงูุณุฎ ูุญุชูู `/supabase/functions/server/index.tsx` ูุงููุงู

5. ุงูุตูู ูู ูุญุฑุฑ ุงูููุฏ

6. ุงุถุบุท **Deploy**

7. ูู Settings โ Secretsุ ุฃุถู:
   - `SUPABASE_URL` = `https://pcymgqdjbdklrikdquih.supabase.co`
   - `SUPABASE_ANON_KEY` = (ูุณุฎูุง ูู /utils/supabase/info.tsx)
   - `SUPABASE_SERVICE_ROLE_KEY` = (ูุณุฎูุง ูู Dashboard โ Settings โ API)

---

## ๐ ููู ุฃุญุตู ุนูู Service Role Keyุ

### ุงูุทุฑููุฉ ุงูุณููุฉ:

1. ุงูุชุญ: https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/settings/api

2. ุงุจุญุซ ุนู ูุณู **Project API keys**

3. ุงูุณุฎ `service_role` key (ูููุณ `anon` key!)

4. **โ๏ธ ุชุญุฐูุฑ:** ูุฐุง ุงูููุชุงุญ ุญุณุงุณ ุฌุฏุงู - ูุง ุชุดุงุฑูู ูุน ุฃุญุฏ!

---

## โ ููู ุฃุชุฃูุฏ ูู ูุฌุงุญ ุงููุดุฑุ

### ุงูุทุฑููุฉ 1: ูู ุงููุชุตูุญ

ุงูุชุญ ูุฐุง ุงูุฑุงุจุท ูู ุงููุชุตูุญ:
```
https://pcymgqdjbdklrikdquih.supabase.co/functions/v1/server/health
```

**ูุฌุจ ุฃู ุชุฑู:**
```json
{
  "status": "healthy",
  "database": true,
  "message": "Backend is running correctly with SQL database"
}
```

### ุงูุทุฑููุฉ 2: ูู Terminal

```bash
curl https://pcymgqdjbdklrikdquih.supabase.co/functions/v1/server/health
```

### ุงูุทุฑููุฉ 3: ูู ุงูุชุทุจูู

1. ุงูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. ุงูุชุญ Developer Console (F12)
3. ูุง ูุฌุจ ุฃู ุชุฑู ุฃุฎุทุงุก 404
4. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุนุฑุถ ุฅุญุตุงุฆูุงุช

---

## ๐จ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ุงููุดููุฉ: `command not found: supabase`

**ุงูุญู:**
```bash
npm install -g supabase
```

ุฃู ุนูู macOS:
```bash
brew install supabase/tap/supabase
```

### ุงููุดููุฉ: `permission denied`

**ุงูุญู:**
```bash
chmod +x deploy-edge-function.sh
chmod +x test-edge-function.sh
```

### ุงููุดููุฉ: ูุง ุฒูุช ุฃุญุตู ุนูู 404

**ุงูุญููู ุงููุญุชููุฉ:**

1. **ุงูุชุธุฑ ุฏูููุฉ:** ูุฏ ูุณุชุบุฑู Supabase ููุชุงู ูุชูุนูู Function

2. **ุชุญูู ูู ุงูุงุณู:** ูุฌุจ ุฃู ูููู ุงุณู Function ุจุงูุถุจุท `server`

3. **ุฑุงุฌุน ุงูููุบ:**
   ```
   https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/functions/server/logs
   ```

4. **ุฃุนุฏ ุงููุดุฑ:**
   ```bash
   supabase functions deploy server --no-verify-jwt
   ```

5. **ุชุญูู ูู Environment Variables:**
   ```bash
   supabase secrets list
   ```
   ูุฌุจ ุฃู ุชุฑู:
   - SUPABASE_URL
   - SUPABASE_ANON_KEY
   - SUPABASE_SERVICE_ROLE_KEY

### ุงููุดููุฉ: `Error: Project not linked`

**ุงูุญู:**
```bash
supabase link --project-ref pcymgqdjbdklrikdquih
```

### ุงููุดููุฉ: `Authentication required`

**ุงูุญู:**
```bash
supabase login
```

---

## ๐ ุงูุฎุทูุงุช ุจุนุฏ ุญู ุงููุดููุฉ

### 1. ุชุทุจูู ูุงุนุฏุฉ ุงูุจูุงูุงุช โ

ุงูุชุญ: https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/sql

ุงูุณุฎ ูุญุชูู `/database_schema.sql` ูุงูุตูู โ **Run**

### 2. ุงุฎุชุจุงุฑ ุงูุชุทุจูู โ

1. ุงูุชุญ ุงูุชุทุจูู ูู ุงููุชุตูุญ
2. ุฌุฑุจ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
3. ุณุฌู ุฏุฎูู
4. ุชุตูุญ ููุญุฉ ุงูุชุญูู

### 3. ุงูุชุญูู ูู ุงูุจูุงูุงุช โ

ุงูุชุญ: https://supabase.com/dashboard/project/pcymgqdjbdklrikdquih/editor

ูุฌุจ ุฃู ุชุฑู ุงูุฌุฏุงูู:
- profiles
- courses
- sessions
- attendance
- enrollments
- live_sessions

---

## ๐ ูุนูููุงุช ุฅุถุงููุฉ

### ูุง ูู Edge Functionุ

Edge Function ูู ููุฏ ูุนูู ุนูู ุฎูุงุฏู Supabase (ูููุณ ุนูู ุฌูุงุฒู).  
ุงูุชุทุจูู ูุฑุณู ุทูุจุงุช HTTP ุฅูู Edge Function ููุชุนุงูู ูุน ุงูุจูุงูุงุช.

### ููุงุฐุง ุญุตูุช ุนูู 404ุ

ูุฃู Edge Function ููุฌูุฏ ูู ููุฏ ุงููุดุฑูุน `/supabase/functions/server/`  
ูููู **ุบูุฑ ููุดูุฑ** ุนูู ุฎูุงุฏู Supabase.

### ููู ุฃุชุฌูุจ ูุฐู ุงููุดููุฉ ูุณุชูุจูุงูุ

ุจุนุฏ ุฃู ุชุนุฏูู ุนูู ููุฏ Edge Functionุ ูุฌุจ ุฅุนุงุฏุฉ ุงููุดุฑ:
```bash
supabase functions deploy server
```

---

## ๐ ูุง ุฒูุช ุฃูุงุฌู ูุดุงููุ

### ุงูุฎูุงุฑ 1: ุฑุงุฌุน ุงูุฏููู ุงููุงูู

ุงูุฑุฃ: [๐ฅ_FIX_404_EDGE_FUNCTION.md](./๐ฅ_FIX_404_EDGE_FUNCTION.md)

### ุงูุฎูุงุฑ 2: ุฑุงุฌุน ุฏููู ุญู ุงููุดุงูู

ุงูุฑุฃ: [TROUBLESHOOTING_AR.md](./TROUBLESHOOTING_AR.md)

### ุงูุฎูุงุฑ 3: ุชูุงุตู

ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: mnafisah668@gmail.com

---

## โฑ๏ธ ุงูููุช ุงููุชููุน

- **ุงููุดุฑ ุงูุชููุงุฆู:** 3-5 ุฏูุงุฆู
- **ุงููุดุฑ ุงููุฏูู:** 5-7 ุฏูุงุฆู
- **ูู Dashboard:** 3-4 ุฏูุงุฆู

---

## ๐ฏ ุงููุฏู ุงูููุงุฆู

ุนูุฏูุง ูุนูู ูู ุดูุก ุจุดูู ุตุญูุญ:

โ ูุง ุฃุฎุทุงุก 404 ูู Console  
โ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ุชุนุฑุถ ุฅุญุตุงุฆูุงุช ุญููููุฉ  
โ ููููู ุงูุชุณุฌูู ูุชุณุฌูู ุงูุฏุฎูู  
โ ููุญุงุช ุงูุชุญูู ุชุนูู ุจุดูู ูุงูู  
โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุตูุฉ ููููุนููุฉ  

---

**๐ ุจุงูุชูููู!**

**ุงุชุจุน ุงูุฎุทูุงุช ุจุนูุงูุฉุ ูุณูุนูู ูู ุดูุก ุจุดูู ูุซุงูู! ๐**

---

**ุขุฎุฑ ุชุญุฏูุซ:** 11 ุฏูุณูุจุฑ 2025  
**ุงููุณุฎุฉ:** 1.0  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ูููุฎุชุจุฑ
