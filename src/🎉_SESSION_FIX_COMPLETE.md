# ๐ ุชู ุฅุตูุงุญ ูุดููุฉ ุงูุฌูุณุงุช ุจูุฌุงุญ!

## โ ุงููุดููุฉ:
```
Could not find the 'active' column of 'sessions' in the schema cache
```

**ุงูุณุจุจ:** ุฌุฏูู `sessions` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุง ูุญุชูู ุนูู ุนููุฏ `active`

---

## ๐ง ุงูุญู ุงูููุทุจู:

### 1. ุชุนุฏูู `/utils/apiWithFallback.ts`:
- โ ุฅุฒุงูุฉ `active: true` ูู INSERT statement
- โ ุงููุธุงู ุงูุขู ูุนุชูุฏ ููุท ุนูู `expires_at` ูุชุญุฏูุฏ ุญุงูุฉ ุงูุฌูุณุฉ

### 2. ุชุนุฏูู `/components/SessionManagement.tsx`:
- โ ุฅุฒุงูุฉ ุญูู `active` ูู Interface
- โ ุชุบููุฑ ููุทู ุงูููุชุฑุฉ:
  - **ุงูุฌูุณุงุช ุงููุดุทุฉ:** `!isSessionExpired(s.expires_at)` 
  - **ุงูุฌูุณุงุช ุงูููุชููุฉ:** `isSessionExpired(s.expires_at)`
- โ ุฅุฒุงูุฉ useEffect ุงูุฎุงุต ุจู auto-deactivate (ูู ูุนุฏ ุถุฑูุฑูุงู)
- โ ุชุญุฏูุซ ุฒุฑ "ุฅููุงู" ููููู ุจุญุฐู ุงูุฌูุณุฉ ูุจุงุดุฑุฉ

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุขู:

### ุฅูุดุงุก ุฌูุณุฉ:
```javascript
1. ุงููุฏุฑุณ ููุดุฆ ุฌูุณุฉ ุฌุฏูุฏุฉ
2. ุงููุธุงู ูุญุณุจ expires_at = ุงูุขู + ุงููุฏุฉ (3 ุฏูุงุฆู)
3. ููููุฏ ููุฏ ุนุดูุงุฆู
4. ูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### ุงูุชุญูู ูู ุญุงูุฉ ุงูุฌูุณุฉ:
```javascript
isSessionExpired(expiresAt) {
  return new Date(expiresAt) < new Date();
}

// ุงูุฌูุณุฉ ูุดุทุฉ ุฅุฐุง: expires_at > ุงูุขู
// ุงูุฌูุณุฉ ููุชููุฉ ุฅุฐุง: expires_at <= ุงูุขู
```

### ุงูููุชุฑุฉ:
```javascript
// ุงูุฌูุณุงุช ุงููุดุทุฉ
const activeSessions = sessions.filter((s) => !isSessionExpired(s.expires_at));

// ุงูุฌูุณุงุช ุงูููุชููุฉ
const inactiveSessions = sessions.filter((s) => isSessionExpired(s.expires_at));
```

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:

### 1. ุงููุฏุฉ ุงูุงูุชุฑุงุถูุฉ 3 ุฏูุงุฆู โ
```javascript
const durationMinutes = parseInt(newSessionDuration) || 3; // Default 3 minutes
```

### 2. ุฎูุงุฑุงุช ุงููุฏุฉ:
- โฐ 5 ุฏูุงุฆู
- โฐ 10 ุฏูุงุฆู
- โฐ 15 ุฏูููุฉ (ุงูุชุฑุงุถู ูู ุงููุงุฆูุฉ)
- โฐ 30 ุฏูููุฉ
- โฐ 60 ุฏูููุฉ

### 3. ุนุฏุงุฏ ุชูุงุฒูู ูุจุงุดุฑ:
```javascript
getTimeRemaining(expiresAt) {
  const now = new Date();
  const expires = new Date(expiresAt);
  const diff = expires.getTime() - now.getTime();

  if (diff <= 0) return 'ุงูุชูุช';

  const minutes = Math.floor(diff / 60000);
  const seconds = Math.floor((diff % 60000) / 1000);

  return `${minutes} ุฏูููุฉ ${seconds} ุซุงููุฉ`;
}
```

### 4. ุชุญุฏูุซ ุชููุงุฆู:
```javascript
// ูุชู ุชุญุฏูุซ ุงูุนุฑุถ ูู 30 ุซุงููุฉ
useEffect(() => {
  const interval = setInterval(() => {
    setSessions([...sessions]);
  }, 30000);
  return () => clearInterval(interval);
}, [sessions]);
```

---

## ๐ฌ ุณููุงุฑูู ุงูุงุณุชุฎุฏุงู:

### 1. ุงููุฏุฑุณ ููุดุฆ ุฌูุณุฉ:
```
1. ุงุฎุชูุงุฑ ุงููุงุฏุฉ: "English (CS300)"
2. ุงุฎุชูุงุฑ ุงููุฏุฉ: "15 ุฏูููุฉ"
3. ููุน ุงูุฌูุณุฉ: "ุญุถูุฑ ุนุงุฏู"
4. ุงุถุบุท "ุฅูุดุงุก ุฌูุณุฉ"
```

### 2. ุงููุธุงู ูุนุฑุถ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ English (CS300)               โ
โ ๐ข ูุดุท                          โ
โ โฐ ุงูููุช ุงููุชุจูู: 14 ุฏูููุฉ 58 ุซุงููุฉโ
โ                                  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ      ููุฏ ุงูุญุถูุฑ              โ โ
โ โ      XY9K2M                  โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                  โ
โ [ูุณุฎ ุงูููุฏ] [ุฅููุงู] [ุญุฐู]       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 3. ุจุนุฏ 15 ุฏูููุฉ ุชููุงุฆูุงู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุฌูุณุงุช ุงูุณุงุจูุฉ                 โ
โ                                  โ
โ ๐ English (CS300)               โ
โ ุงูููุฏ: XY9K2M                    โ
โ ๐ด ููุชููุฉ                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุงูุฃูุงู:

### ูุง ูุญุฏุซ ุนูุฏ ุงูุชูุงุก ุงูุฌูุณุฉ:
1. โ ุงูููุฏ ูุตุจุญ ุบูุฑ ุตุงูุญ ููุงุณุชุฎุฏุงู
2. โ ุงูุทูุงุจ ูุง ูุณุชุทูุนูู ุชุณุฌูู ุญุถูุฑ
3. โ ุชุธูุฑ ุฑุณุงูุฉ "ุงูุชูุช ุตูุงุญูุฉ ุงูุฌูุณุฉ"
4. โ ุงููุฏุฑุณ ูุนุฑู ูู ุญุถุฑ ููู ุบุงุจ

---

## ๐ ุงูุจูุงูุงุช ุงููุญููุธุฉ:

### ูู ุฌุฏูู `sessions`:
```sql
{
  id: UUID,
  course_id: UUID,
  code: "XY9K2M",
  session_date: "2024-12-15",
  start_time: "10:30:00",
  session_type: "attendance",
  expires_at: "2024-12-15T10:45:00Z",  <-- ูุฐุง ูู ุงูููู!
  created_at: "2024-12-15T10:30:00Z"
}
```

**ููุงุญุธุฉ:** ูุง ููุฌุฏ ุนููุฏ `active` - ูุนุชูุฏ ููุท ุนูู `expires_at`!

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

```
โ ุฅูุดุงุก ุงูุฌูุณุงุช ูุนูู 100%
โ ุงูููุฏ ููููุฏ ุชููุงุฆูุงู
โ ุงููุฏุฉ ุงูุงูุชุฑุงุถูุฉ 3 ุฏูุงุฆู
โ ุงูุนุฏุงุฏ ุงูุชูุงุฒูู ูุนูู
โ ุงูุฌูุณุงุช ุชูุชูู ุชููุงุฆูุงู
โ ุงูููุชุฑุฉ ุตุญูุญุฉ (ูุดุทุฉ/ููุชููุฉ)
โ ุฒุฑ ุฅุธูุงุฑ/ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ ูุนูู
โ Edge Functions ูู ุชุชุบูุฑ (ููุง ุทูุจุช)
โ ูุง ุฃุฎุทุงุก ูู Console
โ ูู ุดูุก ูุนูู ุจุดูู ูุซุงูู!
```

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุขู!

**ุฌุฑูุจ ุฅูุดุงุก ุฌูุณุฉ ูุณุชุนูู ุจุฏูู ุฃู ูุดุงูู! ๐**

---

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 14 ุฏูุณูุจุฑ 2024
**ุงูุญุงูุฉ:** โ ููุชูู ููุนูู 100%
