# ğŸ—„ï¸ Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

<div align="center">

![Database](https://img.shields.io/badge/database-supabase-green?style=for-the-badge&logo=supabase)
![Status](https://img.shields.io/badge/status-configured-success?style=for-the-badge)

**Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙƒÙˆÙŠÙ† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¬Ø§Ù‡Ø²ÙŠØªÙ‡Ø§**

</div>

---

## ğŸ“‹ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø°ÙƒÙŠ ÙŠØ³ØªØ®Ø¯Ù… **Supabase** Ù…Ø¹ Ù…Ø¹Ù…Ø§Ø±ÙŠÙ‘Ø© KV Store (Key-Value) Ø¨Ø³ÙŠØ·Ø© ÙˆÙØ¹Ù‘Ø§Ù„Ø©.

### Ù„Ù…Ø§Ø°Ø§ KV StoreØŸ

- âœ… **Ø¨Ø³Ø§Ø·Ø©**: Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ø­Ø¯ ÙŠØ®Ø²Ù† ÙƒÙ„ Ø´ÙŠØ¡
- âœ… **Ù…Ø±ÙˆÙ†Ø©**: Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ migrations Ù…Ø¹Ù‚Ø¯Ø©
- âœ… **Ø³Ø±Ø¹Ø©**: Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø² Ù„Ù„Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
- âœ… **Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø©**: Ù„Ø§ schema Ù…Ø¹Ù‚Ø¯

---

## ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ

### Ø§Ù„Ø®Ø·ÙˆØ© 1: ÙØ­Øµ Ø§Ù„Ø§ØªØµØ§Ù„

Ø§ÙØªØ­ Console Ø§Ù„Ù…ØªØµÙØ­ (F12) ÙˆØ§Ø¨Ø­Ø« Ø¹Ù†:

```
âœ… Supabase connection successful
```

Ø¥Ø°Ø§ Ø±Ø£ÙŠØª:
```
âŒ Supabase not configured
```

Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª ÙÙŠ [GITHUB_SETUP_GUIDE.md](/GITHUB_SETUP_GUIDE.md)

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [Supabase Dashboard](https://supabase.com/dashboard)
2. Ø§ÙØªØ­ Ù…Ø´Ø±ÙˆØ¹Ùƒ
3. **Table Editor**
4. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¬Ø¯ÙˆÙ„: `kv_store_90ad488b`

**Ù‡Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ù…ÙˆØ¬ÙˆØ¯ØŸ**

#### âœ… Ù†Ø¹Ù… - Ù…Ù…ØªØ§Ø²!
Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙˆØ±Ø§Ù‹.

#### âŒ Ù„Ø§ - Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„

Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø³ÙŠÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù„Ù„Ù†Ø¸Ø§Ù…. Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¤Ù‡ ÙŠØ¯ÙˆÙŠØ§Ù‹:

##### Ø¹Ø¨Ø± SQL Editor:

1. ÙÙŠ Supabase Dashboard â†’ **SQL Editor**
2. Ø§Ø¶ØºØ· **"New query"**
3. Ø§Ù„ØµÙ‚ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯:

```sql
-- Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ KV Store Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
CREATE TABLE IF NOT EXISTS kv_store_90ad488b (
  key TEXT PRIMARY KEY,
  value JSONB NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Ø¥Ù†Ø´Ø§Ø¡ ÙÙ‡Ø±Ø³ Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹
CREATE INDEX IF NOT EXISTS idx_kv_store_key_prefix 
ON kv_store_90ad488b(key text_pattern_ops);

-- ØªÙØ¹ÙŠÙ„ Row Level Security (RLS)
ALTER TABLE kv_store_90ad488b ENABLE ROW LEVEL SECURITY;

-- Ø³ÙŠØ§Ø³Ø© Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØ§Ù„ÙƒØªØ§Ø¨Ø© (Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙÙ‚Ø·)
CREATE POLICY "Allow all operations for authenticated users" 
ON kv_store_90ad488b
FOR ALL
TO authenticated
USING (true)
WITH CHECK (true);

-- Ø³ÙŠØ§Ø³Ø© Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù…ØµØ§Ø¯Ù‚ÙŠÙ† (Ù„Ù„ØªØ·ÙˆÙŠØ± ÙÙ‚Ø·)
CREATE POLICY "Allow read for anon users" 
ON kv_store_90ad488b
FOR SELECT
TO anon
USING (true);

-- Ø¥Ø¶Ø§ÙØ© trigger Ù„ØªØ­Ø¯ÙŠØ« updated_at ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER update_kv_store_updated_at 
BEFORE UPDATE ON kv_store_90ad488b
FOR EACH ROW
EXECUTE FUNCTION update_updated_at_column();
```

4. Ø§Ø¶ØºØ· **"Run"**
5. ÙŠØ¬Ø¨ Ø£Ù† ØªØ±Ù‰: **"Success. No rows returned"**

---

## ğŸ“Š Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ù†Ù…ÙˆØ°Ø¬ KV Store

```typescript
{
  key: string,      // Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±ÙŠØ¯ (Ù…Ø«Ù„: "user:abc123")
  value: object,    // Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ØµÙŠØºØ© JSON
  created_at: Date, // ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
  updated_at: Date  // ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«
}
```

### Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

| Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ù…ÙØªØ§Ø­ | Ù…Ø«Ø§Ù„ | Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… |
|------|---------|------|-----------|
| **Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†** | `user:{userId}` | `user:abc-123` | Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… |
| **Ø§Ù„Ù…ÙˆØ§Ø¯** | `course:{courseId}` | `course:course_1234` | Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© |
| **Ø§Ù„ØªØ³Ø¬ÙŠÙ„** | `enrollment:{studentId}:{courseId}` | `enrollment:abc:course_1` | ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ ÙÙŠ Ù…Ø§Ø¯Ø© |
| **Ø§Ù„Ø¬Ù„Ø³Ø§Øª** | `session:{sessionId}` | `session:sess_5678` | Ø¬Ù„Ø³Ø© Ø­Ø¶ÙˆØ±/Ø¨Ø« |
| **Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª** | `session_code:{code}` | `session_code:ABC123` | Ø±Ø¨Ø· Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø§Ù„Ø¬Ù„Ø³Ø© |
| **Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„** | `schedule:{scheduleId}` | `schedule:sched_9012` | Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª |
| **Ø§Ù„Ø­Ø¶ÙˆØ±** | `attendance:{recordId}` | `attendance:att_3456` | Ø³Ø¬Ù„ Ø­Ø¶ÙˆØ± |

### Ù…Ø«Ø§Ù„: Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…

```json
{
  "key": "user:550e8400-e29b-41d4-a716-446655440000",
  "value": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "email": "student@kku.edu.sa",
    "full_name": "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
    "role": "student",
    "university_id": "441234567",
    "created_at": "2025-12-05T10:30:00.000Z",
    "active_session": null
  }
}
```

### Ù…Ø«Ø§Ù„: Ø¬Ù„Ø³Ø© Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±

```json
{
  "key": "session:session_1733396400_xyz789",
  "value": {
    "id": "session_1733396400_xyz789",
    "course_id": "course_1733390000_abc123",
    "code": "LIVE01",
    "created_by": "instructor-id",
    "created_at": "2025-12-05T14:00:00.000Z",
    "expires_at": "2025-12-05T15:30:00.000Z",
    "active": true,
    "session_type": "live",
    "title": "Ù…Ø­Ø§Ø¶Ø±Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©",
    "stream_active": true,
    "viewers_count": 15
  }
}
```

---

## ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### Ø§Ø®ØªØ¨Ø§Ø± 1: Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

ÙÙŠ Supabase Dashboard â†’ **SQL Editor**:

```sql
-- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
SELECT * FROM kv_store_90ad488b 
WHERE key LIKE 'user:%' 
LIMIT 10;

-- Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯
SELECT * FROM kv_store_90ad488b 
WHERE key LIKE 'course:%' 
LIMIT 10;

-- Ø¹Ø±Ø¶ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©
SELECT * FROM kv_store_90ad488b 
WHERE key LIKE 'session:%' 
AND value->>'active' = 'true';
```

### Ø§Ø®ØªØ¨Ø§Ø± 2: Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©

```sql
-- Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
INSERT INTO kv_store_90ad488b (key, value)
VALUES (
  'user:test-admin-001',
  '{
    "id": "test-admin-001",
    "email": "admin@kku.edu.sa",
    "full_name": "Ù…Ø¯ÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…",
    "role": "admin",
    "created_at": "2025-12-05T00:00:00.000Z"
  }'::jsonb
);

-- Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ø¯Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
INSERT INTO kv_store_90ad488b (key, value)
VALUES (
  'course:test-course-001',
  '{
    "id": "test-course-001",
    "course_name": "Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø©",
    "course_code": "CS101",
    "instructor_id": "test-admin-001",
    "created_at": "2025-12-05T00:00:00.000Z"
  }'::jsonb
);
```

### Ø§Ø®ØªØ¨Ø§Ø± 3: Ø§Ù„Ø¨Ø­Ø«

```sql
-- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯
SELECT * FROM kv_store_90ad488b
WHERE value->>'email' = 'admin@kku.edu.sa';

-- Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø§Ø¯Ø© Ø¨Ø§Ù„ÙƒÙˆØ¯
SELECT * FROM kv_store_90ad488b
WHERE value->>'course_code' = 'CS101';

-- Ø¹Ø¯Ù‘ Ø§Ù„Ø·Ù„Ø§Ø¨
SELECT COUNT(*) FROM kv_store_90ad488b
WHERE key LIKE 'user:%' 
AND value->>'role' = 'student';
```

---

## ğŸ“ˆ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡

### ÙÙŠ Supabase Dashboard

1. **Database â†’ Logs**
   - Ø±Ø§Ù‚Ø¨ Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª SQL
   - Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ø¨Ø·ÙŠØ¦Ø©

2. **Database â†’ Query Performance**
   - Ø¹Ø±Ø¶ Ø£Ø¨Ø·Ø£ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª
   - ØªØ­Ø³ÙŠÙ† Ø§Ù„ÙÙ‡Ø§Ø±Ø³

3. **Reports**
   - Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚Ø±Øµ
   - Ø¹Ø¯Ø¯ Ø§Ù„ØµÙÙˆÙ
   - Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù…

### Ù…Ø¤Ø´Ø±Ø§Øª ØµØ­Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

```sql
-- Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
SELECT COUNT(*) as total_records FROM kv_store_90ad488b;

-- Ø­Ø¬Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
SELECT pg_size_pretty(pg_total_relation_size('kv_store_90ad488b')) as table_size;

-- ØªÙˆØ²ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
SELECT 
  CASE 
    WHEN key LIKE 'user:%' THEN 'Users'
    WHEN key LIKE 'course:%' THEN 'Courses'
    WHEN key LIKE 'session:%' THEN 'Sessions'
    WHEN key LIKE 'enrollment:%' THEN 'Enrollments'
    WHEN key LIKE 'attendance:%' THEN 'Attendance'
    WHEN key LIKE 'schedule:%' THEN 'Schedules'
    ELSE 'Other'
  END as data_type,
  COUNT(*) as count
FROM kv_store_90ad488b
GROUP BY data_type
ORDER BY count DESC;
```

---

## ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©

### Row Level Security (RLS)

Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ³ØªØ®Ø¯Ù… RLS Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:

```sql
-- Ø¹Ø±Ø¶ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
SELECT * FROM pg_policies 
WHERE tablename = 'kv_store_90ad488b';
```

### Ø³ÙŠØ§Ø³Ø§Øª Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ Ù„Ù„Ø¥Ù†ØªØ§Ø¬

```sql
-- Ø­Ø°Ù Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„ØªØ·ÙˆÙŠØ±
DROP POLICY IF EXISTS "Allow all operations for authenticated users" ON kv_store_90ad488b;
DROP POLICY IF EXISTS "Allow read for anon users" ON kv_store_90ad488b;

-- Ø³ÙŠØ§Ø³Ø© Ù‚Ø±Ø§Ø¡Ø© Ø¢Ù…Ù†Ø©
CREATE POLICY "Users can read their own data"
ON kv_store_90ad488b
FOR SELECT
TO authenticated
USING (
  -- ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©
  key LIKE 'user:' || auth.uid() || '%'
  OR
  -- Ø£Ùˆ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø³Ø¬Ù„ ÙÙŠÙ‡Ø§
  key LIKE 'course:%'
  OR
  -- Ø£Ùˆ Ø§Ù„Ø¬Ù„Ø³Ø§Øª
  key LIKE 'session:%'
);

-- Ø³ÙŠØ§Ø³Ø© ÙƒØªØ§Ø¨Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©
CREATE POLICY "Only admins can write"
ON kv_store_90ad488b
FOR ALL
TO authenticated
USING (
  -- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯ÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  EXISTS (
    SELECT 1 FROM kv_store_90ad488b
    WHERE key = 'user:' || auth.uid()
    AND value->>'role' IN ('admin', 'instructor')
  )
);
```

---

## ğŸ› ï¸ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø¯ÙˆØ±ÙŠØ©

### ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©

```sql
-- Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© (Ø£Ù‚Ø¯Ù… Ù…Ù† 30 ÙŠÙˆÙ…)
DELETE FROM kv_store_90ad488b
WHERE key LIKE 'session:%'
AND (value->>'expires_at')::timestamptz < NOW() - INTERVAL '30 days';

-- Ø­Ø°Ù Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©
DELETE FROM kv_store_90ad488b
WHERE key LIKE 'session_code:%'
AND key NOT IN (
  SELECT value->>'code' FROM kv_store_90ad488b WHERE key LIKE 'session:%'
);
```

### Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ

ÙÙŠ Supabase Dashboard:
1. **Database â†’ Backups**
2. ØªÙØ¹ÙŠÙ„ **Point-in-Time Recovery (PITR)**
3. Ø¬Ø¯ÙˆÙ„Ø© Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© ÙŠÙˆÙ…ÙŠØ©

### Ø§Ù„ØªØµØ¯ÙŠØ±

```sql
-- ØªØµØ¯ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ CSV
\copy (SELECT * FROM kv_store_90ad488b) TO '/tmp/kv_store_backup.csv' CSV HEADER;
```

---

## ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù†Ù…ÙˆØ°Ø¬ÙŠØ©

### Ù„Ø¬Ø§Ù…Ø¹Ø© Ø¨Ù€ 10,000 Ø·Ø§Ù„Ø¨

| Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ | Ø§Ù„Ø­Ø¬Ù… Ø§Ù„ØªÙ‚Ø±ÙŠØ¨ÙŠ |
|------|---------------|----------------|
| **Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†** | 10,550 | ~10 MB |
| **Ø§Ù„Ù…ÙˆØ§Ø¯** | 500 | ~500 KB |
| **Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª** | 50,000 | ~25 MB |
| **Ø§Ù„Ø¬Ù„Ø³Ø§Øª** | 2,000/Ø´Ù‡Ø± | ~5 MB/Ø´Ù‡Ø± |
| **Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø­Ø¶ÙˆØ±** | 100,000/Ø´Ù‡Ø± | ~50 MB/Ø´Ù‡Ø± |
| **Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„** | 2,000 | ~2 MB |

**Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ù†ÙˆÙŠ**: ~700 MB

**Ø®Ø·Ø© Supabase Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©**: 500 MB  
**Ù…ÙˆØµÙ‰ Ø¨Ù‡**: Pro Plan ($25/Ø´Ù‡Ø±) - 8 GB

---

## ğŸ”§ Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ù…Ø´Ø§ÙƒÙ„

### Ù…Ø´ÙƒÙ„Ø©: "relation does not exist"

**Ø§Ù„Ø³Ø¨Ø¨:** Ø§Ù„Ø¬Ø¯ÙˆÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯

**Ø§Ù„Ø­Ù„:**
```sql
-- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¬Ø¯ÙˆÙ„
SELECT EXISTS (
  SELECT FROM information_schema.tables 
  WHERE table_name = 'kv_store_90ad488b'
);

-- Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ (Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù‚Ø³Ù… Ø£Ø¹Ù„Ø§Ù‡)
```

### Ù…Ø´ÙƒÙ„Ø©: "permission denied"

**Ø§Ù„Ø³Ø¨Ø¨:** RLS ÙŠÙ…Ù†Ø¹ Ø§Ù„ÙˆØµÙˆÙ„

**Ø§Ù„Ø­Ù„:**
```sql
-- ØªØ¹Ø·ÙŠÙ„ RLS Ù…Ø¤Ù‚ØªØ§Ù‹ (Ù„Ù„ØªØ·ÙˆÙŠØ± ÙÙ‚Ø·!)
ALTER TABLE kv_store_90ad488b DISABLE ROW LEVEL SECURITY;

-- Ø£Ùˆ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª
SELECT * FROM pg_policies WHERE tablename = 'kv_store_90ad488b';
```

### Ù…Ø´ÙƒÙ„Ø©: Ø¨Ø·Ø¡ ÙÙŠ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª

**Ø§Ù„Ø­Ù„:**
```sql
-- Ø¥Ù†Ø´Ø§Ø¡ ÙÙ‡Ø§Ø±Ø³ Ø¥Ø¶Ø§ÙÙŠØ©
CREATE INDEX idx_user_email ON kv_store_90ad488b((value->>'email'));
CREATE INDEX idx_course_code ON kv_store_90ad488b((value->>'course_code'));
CREATE INDEX idx_session_active ON kv_store_90ad488b((value->>'active')) 
WHERE key LIKE 'session:%';
```

---

## ğŸ“š Ù…ÙˆØ§Ø±Ø¯ Ø¥Ø¶Ø§ÙÙŠØ©

- ğŸ“– [Supabase Documentation](https://supabase.com/docs)
- ğŸ”§ [PostgreSQL JSON Functions](https://www.postgresql.org/docs/current/functions-json.html)
- ğŸ›¡ï¸ [Row Level Security Guide](https://supabase.com/docs/guides/auth/row-level-security)

---

<div align="center">

**Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø§Ù‡Ø²Ø©! ğŸ‰**

[Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ](/README.md)

</div>
